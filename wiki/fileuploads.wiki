#summary Processing File Uploads

= Processing File Uploads =

EasyGSP uses [http://commons.apache.org/fileupload/ Apache's Commons File Upload] library to process file uploads. 
When the page is posted, call request.parseFileUploads(), it returns a List of `FileItems`.  

Method signature:<br/>
List`<org.apache.commons.fileupload.FileItem>` parseFileUploads()

This methods returns an empty list or a List of `FileItems`, never null.

`**` *Note* - when attemping to write a fileItem of size 0, an `FileNotFoundException` exception may be thrown.  It's best to check that size is greater than zero before writing.

fileupload.gsp
{{{

<%

        import groovy.sql.Sql
        import org.apache.commons.fileupload.FileItem


        def uploadLocation=''

                request.parseFileUploads().each {item->
                        if (!item.isFormField()) {
                                File uploadedFile = new File(application.appPath + File.separator + item.name);
                                //uploadedFile.mkdirs();
                                item.write(uploadedFile);
                                uploadLocation = 'File uploaded to: ' + uploadedFile.canonicalPath 
                        } else {
                                cout item.fieldName
                        }
                        console("file upload" + item);
                }


%>


<html>
        <head>
                <title>File Upload Example</title>
        </head>
        <body>
                ${uploadLocation}
                <form action="fileupload.gsp" method="POST" enctype="multipart/form-data">
                        File: <input type="file" name="file"/><br/>

                        <input type="submit"/>
                </form>

        </body>
</html>


}}}